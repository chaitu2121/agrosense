<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>AgroSense â€“ Smart Agriculture Tools</title>

  <!-- CSS -->
  <link rel="stylesheet" href="style.css?v=1" />
</head>
<body>

<div class="container">

  <header>
    <h1>ğŸŒ¾ AgroSense Tools</h1>
    <p class="subtitle">
      Smart farming tools + AI assistant to protect farmer money and water
    </p>
  </header>

  <!-- TOOL NAV -->
  <div class="form-card">
    <h2 style="text-align:center;">âš¡ Quick Tools Menu</h2>
    <p style="text-align:center;color:#555;">Tap to jump instantly.</p>

    <div class="grid2">
      <button class="btn secondary" onclick="jumpTo('riskTool')">ğŸŒ± Risk Predictor</button>
      <button class="btn secondary" onclick="jumpTo('waterTool')">ğŸ’§ Water Budget</button>
      <button class="btn secondary" onclick="jumpTo('seedTool')">ğŸŒ¾ Seed + Varieties</button>
      <button class="btn secondary" onclick="jumpTo('calendarTool')">ğŸ“… Crop Calendar</button>
      <button class="btn secondary" onclick="jumpTo('rescueTool')">ğŸš¨ Rescue Mode</button>
      <button class="btn secondary" onclick="jumpTo('fertTool')">ğŸ§ª Fertilizer Guide</button>
      <button class="btn secondary" onclick="jumpTo('notesTool')">ğŸ“ Farmer Notes</button>
      <button class="btn secondary" onclick="jumpTo('aiTool')">ğŸ¤– FarmCulture AI</button>
    </div>
  </div>

  <!-- 1) RISK TOOL -->
  <div class="form-card" id="riskTool">
    <h2 style="text-align:center;">ğŸŒ± Crop Failure Risk Predictor</h2>
    <p style="text-align:center;color:#555;">
      Check risk before sowing to protect money and water.
    </p>

    <label>Season</label>
    <select id="season" onchange="showQuickAdvice()">
      <option value="">Select Season</option>
      <option value="monsoon">Monsoon (Kharif)</option>
      <option value="winter">Winter (Rabi)</option>
      <option value="summer">Summer</option>
    </select>

    <label>Crop</label>
    <input id="cropSearch" type="text"
      placeholder="Search crop (example: onion, wheat, cotton)"
      oninput="filterCrops()" />

    <select id="crop" onchange="showQuickAdvice()">
      <option value="">Select Crop</option>
      <option value="rice">Rice</option>
      <option value="wheat">Wheat</option>
      <option value="cotton">Cotton</option>
      <option value="sugarcane">Sugarcane</option>
      <option value="soybean">Soybean</option>
      <option value="maize">Maize</option>
      <option value="bajra">Bajra</option>
      <option value="jowar">Jowar</option>
      <option value="ragi">Ragi</option>
      <option value="gram">Chana (Gram)</option>
      <option value="tur">Tur</option>
      <option value="moong">Moong</option>
      <option value="urad">Urad</option>
      <option value="groundnut">Groundnut</option>
      <option value="sunflower">Sunflower</option>
      <option value="mustard">Mustard</option>
      <option value="onion">Onion</option>
      <option value="tomato">Tomato</option>
      <option value="potato">Potato</option>
      <option value="chilli">Chilli</option>
      <option value="brinjal">Brinjal</option>
      <option value="okra">Okra</option>
      <option value="banana">Banana</option>
      <option value="grapes">Grapes</option>
      <option value="pomegranate">Pomegranate</option>
    </select>

    <label>Soil Type</label>
    <select id="soil" onchange="showQuickAdvice()">
      <option value="">Select Soil</option>
      <option value="black">Black Soil</option>
      <option value="red">Red Soil</option>
      <option value="loamy">Loamy Soil</option>
      <option value="sandy">Sandy Soil</option>
      <option value="clay">Clay Soil</option>
      <option value="mixed">Mixed / Local Soil</option>
    </select>

    <label>Water Source</label>
    <select id="water" onchange="showQuickAdvice()">
      <option value="">Select Water Source</option>
      <option value="rain">Rainfed Only</option>
      <option value="borewell">Borewell</option>
      <option value="openwell">Open Well</option>
      <option value="canal">Canal</option>
      <option value="river">River</option>
      <option value="farmpond">Farm Pond</option>
      <option value="drip">Drip Irrigation</option>
      <option value="sprinkler">Sprinkler Irrigation</option>
      <option value="tank">Water Tank</option>
    </select>

    <button class="btn" onclick="analyzeRisk()">ğŸš€ Analyze Risk</button>

    <div class="result-box" id="riskResult">
      Your risk analysis will appear here.
    </div>
  </div>

  <!-- QUICK RECOMMENDATION -->
  <div class="form-card">
    <h2 style="text-align:center;">âš¡ Quick Recommendation</h2>
    <div class="result-box" id="quickAdvice">
      Select season, crop, soil and water source to see quick advice.
    </div>
  </div>

  <!-- 2) WATER TOOL -->
  <div class="form-card" id="waterTool">
    <h2 style="text-align:center;">ğŸ’§ Water Budget + Water Risk</h2>

    <label>Crop</label>
    <select id="w_crop">
      <option value="">Select Crop</option>
      <option value="rice">Rice</option>
      <option value="wheat">Wheat</option>
      <option value="cotton">Cotton</option>
      <option value="sugarcane">Sugarcane</option>
      <option value="soybean">Soybean</option>
      <option value="onion">Onion</option>
      <option value="tomato">Tomato</option>
      <option value="banana">Banana</option>
      <option value="gram">Chana</option>
      <option value="bajra">Bajra</option>
      <option value="jowar">Jowar</option>
    </select>

    <label>Land (Acres)</label>
    <input id="w_acres" type="number" placeholder="Example: 1.5" />

    <label>Water Source</label>
    <select id="w_source">
      <option value="">Select Water</option>
      <option value="rain">Rainfed</option>
      <option value="well">Well</option>
      <option value="borewell">Borewell</option>
      <option value="canal">Canal</option>
      <option value="drip">Drip</option>
    </select>

    <button class="btn" onclick="calcWater()">ğŸ’§ Calculate Water Budget</button>

    <div class="result-box" id="waterResult">
      Water budget will appear here.
    </div>
  </div>

  <!-- 3) SEED TOOL -->
  <div class="form-card" id="seedTool">
    <h2 style="text-align:center;">ğŸŒ¾ Seed Rate + Seed Varieties</h2>

    <label>Crop</label>
    <select id="seed_crop">
      <option value="">Select Crop</option>
      <option value="rice">Rice</option>
      <option value="wheat">Wheat</option>
      <option value="cotton">Cotton</option>
      <option value="soybean">Soybean</option>
      <option value="maize">Maize</option>
      <option value="gram">Chana</option>
      <option value="tur">Tur</option>
      <option value="onion">Onion</option>
      <option value="tomato">Tomato</option>
      <option value="bajra">Bajra</option>
      <option value="jowar">Jowar</option>
    </select>

    <label>Land (Acres)</label>
    <input id="seed_acres" type="number" placeholder="Example: 2" />

    <button class="btn" onclick="calcSeed()">ğŸŒ± Calculate Seed + Varieties</button>

    <div class="result-box" id="seedResult">
      Seed rate and varieties will appear here.
    </div>
  </div>

  <!-- 4) CROP CALENDAR -->
  <div class="form-card" id="calendarTool">
    <h2 style="text-align:center;">ğŸ“… Crop Calendar (Month-wise)</h2>

    <label>Select Crop</label>
    <select id="cal_crop">
      <option value="">Select Crop</option>
      <option value="rice">Rice</option>
      <option value="wheat">Wheat</option>
      <option value="soybean">Soybean</option>
      <option value="cotton">Cotton</option>
      <option value="onion">Onion</option>
      <option value="gram">Chana</option>
      <option value="tur">Tur</option>
      <option value="bajra">Bajra</option>
      <option value="jowar">Jowar</option>
      <option value="sugarcane">Sugarcane</option>
    </select>

    <button class="btn" onclick="showCalendar()">ğŸ“… Show Calendar</button>

    <div class="result-box" id="calendarResult">
      Crop calendar will appear here.
    </div>
  </div>

  <!-- 5) RESCUE MODE -->
  <div class="form-card" id="rescueTool">
    <h2 style="text-align:center;">ğŸš¨ Emergency Crop Rescue Mode</h2>

    <div class="grid2">
      <button class="btn secondary" onclick="rescue('yellow')">ğŸ‚ Leaves Yellow</button>
      <button class="btn secondary" onclick="rescue('dry')">ğŸ”¥ Plant Drying</button>
      <button class="btn secondary" onclick="rescue('slow')">ğŸŒ Slow Growth</button>
      <button class="btn secondary" onclick="rescue('pest')">ğŸ› Pest Attack</button>
    </div>

    <div class="result-box" id="rescueResult">
      Rescue steps will appear here.
    </div>
  </div>

  <!-- 6) FERTILIZER GUIDE -->
  <div class="form-card" id="fertTool">
    <h2 style="text-align:center;">ğŸ§ª Fertilizer Basic Guide (Safe)</h2>

    <label>Select Crop</label>
    <select id="f_crop">
      <option value="">Select Crop</option>
      <option value="rice">Rice</option>
      <option value="wheat">Wheat</option>
      <option value="cotton">Cotton</option>
      <option value="soybean">Soybean</option>
      <option value="onion">Onion</option>
      <option value="tomato">Tomato</option>
      <option value="gram">Chana</option>
      <option value="tur">Tur</option>
      <option value="bajra">Bajra</option>
      <option value="jowar">Jowar</option>
    </select>

    <button class="btn" onclick="fertGuide()">ğŸ§ª Show Fertilizer Guide</button>

    <div class="result-box" id="fertResult">
      Fertilizer guide will appear here.
    </div>
  </div>

  <!-- 7) NOTES -->
  <div class="form-card" id="notesTool">
    <h2 style="text-align:center;">ğŸ“ Farmer Notes (Saved on Phone)</h2>

    <label>My Notes</label>
    <textarea id="notesBox"
      style="width:100%; height:120px; padding:12px; border-radius:14px; border:1px solid rgba(0,0,0,0.12);"></textarea>

    <button class="btn" onclick="saveNotes()">ğŸ’¾ Save Notes</button>
    <button class="btn secondary" onclick="clearNotes()">ğŸ—‘ Clear Notes</button>

    <div class="result-box" id="notesStatus">
      Notes status will appear here.
    </div>
  </div>

  <!-- 8) AI -->
  <div class="form-card" id="aiTool">
    <h2 style="text-align:center;">ğŸ¤– FarmCulture AI Assistant</h2>

    <button class="btn" onclick="openFarmCulture()">ğŸ¤– Open FarmCulture AI (Live)</button>

    <div class="result-box">
      âš ï¸ AI gives guidance. Final decision depends on local conditions.
    </div>
  </div>

  <a href="index.html" class="btn secondary">â¬… Back to Home</a>

</div>

<!-- JS -->
<script src="tools.js?v=1"></script>
</body>
        </html>
/* =================================================
   AGROSENSE UNIFIED 360Â° INTELLIGENCE ENGINE
   Stable + Future Ready + Multi-Layer Logic
================================================= */

/* ---------------- BASIC NAVIGATION ---------------- */

function jumpTo(id){
  const el = document.getElementById(id);
  if(el) el.scrollIntoView({behavior:"smooth", block:"start"});
}

function openFarmCulture(){
  window.open("https://huggingface.co/spaces/Chaitu2121/farmculture-ai", "_blank");
}

/* ---------------- CROP SEARCH ---------------- */

function filterCrops(){
  const search = document.getElementById("cropSearch").value.toLowerCase();
  const cropSelect = document.getElementById("crop");
  const options = cropSelect.options;

  for(let i=0; i<options.length; i++){
    if(i === 0) continue;
    const txt = options[i].text.toLowerCase();
    options[i].style.display = txt.includes(search) ? "" : "none";
  }
}

/* ---------------- QUICK ADVICE ---------------- */

function showQuickAdvice(){
  const season = document.getElementById("season").value;
  const crop = document.getElementById("crop").value;
  const soil = document.getElementById("soil").value;
  const water = document.getElementById("water").value;
  const box = document.getElementById("quickAdvice");

  if(!season || !crop || !soil || !water){
    box.innerHTML = "Complete all selections for advice.";
    return;
  }

  let advice = "System stable. Monitor soil moisture and weather.";

  if(water === "rain") advice = "Rain dependent: choose drought tolerant crops.";
  if(soil === "sandy") advice = "Sandy soil: use mulching and frequent irrigation.";

  const waterHeavy = ["rice","sugarcane","banana"];
  if(waterHeavy.includes(crop) && water === "rain")
    advice = "High risk: high-water crop under rainfed condition.";

  box.innerHTML = advice;
}

/* ---------------- 360Â° MASTER ENGINE ---------------- */

function analyzeRisk(){

  const season = document.getElementById("season").value;
  const crop = document.getElementById("crop").value;
  const soil = document.getElementById("soil").value;
  const water = document.getElementById("water").value;

  if(!season || !crop || !soil || !water){
    document.getElementById("riskResult").innerHTML =
      "âš ï¸ Complete Season, Crop, Soil and Water first.";
    return;
  }

  /* --- Layer Scores --- */

  let climateScore = 80;
  let waterScore = 80;
  let soilScore = 80;
  let fertilizerScore = 75;
  let marketScore = 75;
  let resilienceScore = 70;

  /* Climate */
  if(season === "summer") climateScore -= 25;
  if(season === "monsoon") climateScore += 5;

  /* Water */
  if(water === "rain") waterScore -= 30;
  if(water === "drip") waterScore += 10;

  /* Soil */
  if(soil === "sandy") soilScore -= 20;
  if(soil === "loamy") soilScore += 5;

  /* Fertilizer Dependency */
  const nitrogenHeavy = ["rice","sugarcane","cotton"];
  if(nitrogenHeavy.includes(crop)) fertilizerScore -= 15;

  /* Market Volatility */
  const volatile = ["tomato","onion","chilli"];
  if(volatile.includes(crop)) marketScore -= 20;

  /* Resilience */
  const droughtCrops = ["bajra","jowar","ragi","gram","tur"];
  if(droughtCrops.includes(crop)) resilienceScore += 20;

  const finalScore = Math.round(
    (climateScore + waterScore + soilScore + fertilizerScore + marketScore + resilienceScore) / 6
  );

  let classification = "Future Stable";
  if(finalScore < 70) classification = "Moderate Risk";
  if(finalScore < 50) classification = "High Strategic Risk";

  let advice = "System stable. Continue monitoring.";
  if(finalScore < 70)
    advice = "Improve irrigation + consider diversification.";
  if(finalScore < 50)
    advice = "Switch to resilient crops and reduce high-risk inputs.";

  document.getElementById("riskResult").innerHTML = `
    <h3>ğŸŒ AgroSense 360Â° Strategic Report</h3>
    ğŸŒ¡ Climate: ${climateScore}/100 <br>
    ğŸ’§ Water Security: ${waterScore}/100 <br>
    ğŸŒ± Soil Health: ${soilScore}/100 <br>
    ğŸ§ª Fertilizer Dependency: ${fertilizerScore}/100 <br>
    ğŸ“‰ Market Stability: ${marketScore}/100 <br>
    ğŸ›¡ Crop Resilience: ${resilienceScore}/100 <br>
    <br>
    <b>Final Unified Score:</b> ${finalScore}/100 <br>
    <b>Classification:</b> ${classification}
    <br><br>
    <b>Strategic Advice:</b><br>${advice}
  `;

  showQuickAdvice();
}

/* ---------------- WATER TOOL ---------------- */

function calcWater(){
  const crop = document.getElementById("w_crop").value;
  const acres = parseFloat(document.getElementById("w_acres").value);
  const source = document.getElementById("w_source").value;

  if(!crop || !acres || acres <= 0 || !source){
    document.getElementById("waterResult").innerHTML =
      "Complete crop, acres, and water source.";
    return;
  }

  let risk = "Low";
  if(source === "rain") risk = "High";
  if(source === "drip") risk = "Low";

  document.getElementById("waterResult").innerHTML =
    `Water Risk: ${risk} <br>Land: ${acres} acres`;
}

/* ---------------- SEED TOOL ---------------- */

function calcSeed(){
  const crop = document.getElementById("seed_crop").value;
  const acres = parseFloat(document.getElementById("seed_acres").value);

  if(!crop || !acres || acres <= 0){
    document.getElementById("seedResult").innerHTML =
      "Select crop and acres.";
    return;
  }

  const seedRates = {
    maize: 9,
    wheat: 40,
    soybean: 30,
    rice: 10
  };

  const rate = seedRates[crop] || 25;
  const total = (rate * acres).toFixed(2);

  document.getElementById("seedResult").innerHTML =
    `Estimated Seed Required: ${total} kg`;
}

/* ---------------- NOTES ---------------- */

function saveNotes(){
  const text = document.getElementById("notesBox").value;
  localStorage.setItem("agrosense_notes", text);
  document.getElementById("notesStatus").innerHTML =
    "Notes saved.";
}

function clearNotes(){
  localStorage.removeItem("agrosense_notes");
  document.getElementById("notesBox").value = "";
  document.getElementById("notesStatus").innerHTML =
    "Notes cleared.";
}

window.onload = function(){
  const saved = localStorage.getItem("agrosense_notes");
  if(saved){
    document.getElementById("notesBox").value = saved;
  }
};
